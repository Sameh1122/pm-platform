<!DOCTYPE html>
<html>
<head>
  <title><%= (typeof isAdmin !== 'undefined' && isAdmin) ? 'Admin Dashboard' : 'Dashboard' %></title>
  <link rel="stylesheet" href="/styles.css">
  <style>
    .muted{color:var(--muted,#94a3b8);font-size:13px}
    .actions{display:flex;gap:8px;flex-wrap:wrap}
    .card h3{margin:0 0 8px 0}
  </style>
</head>
<body>
  <%- include('partials/header') %>

  <div class="container">
    <h1 style="margin:0 0 8px 0">
      <%= (typeof isAdmin !== 'undefined' && isAdmin) ? 'Admin Dashboard' : 'Dashboard' %>
    </h1>
    <p class="muted">This is a generic landing if no specific role dashboard matched.</p>

    <div class="card" style="margin-top:12px">
      <h3>Quick Links</h3>
      <div class="actions">
        <a class="btn" href="/">Home</a>
        <a class="btn" href="/dashboard">Refresh</a>
        <a class="btn btn-outline" href="/logout">Logout</a>
      </div>
    </div>

    <div class="card" style="margin-top:12px">
      <h3>Status</h3>
      <p class="muted">
        Logged in as <strong><%= (user && (user.name || user.email)) || 'Unknown' %></strong>.
        If you expected a specialized dashboard, ensure your role assignment is correct.
      </p>
      <details style="margin-top:8px">
        <summary class="muted">Show my roles</summary>
        <ul class="muted" style="margin-top:6px">
          <% (user?.userRoles || []).forEach(function(ur){ %>
            <li><%= ur.role?.name || 'â€”' %></li>
          <% }) %>
        </ul>
      </details>
    </div>
  </div>
</body>
</html>
